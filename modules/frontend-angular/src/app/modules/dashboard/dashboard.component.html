<div class="dashboard-container">
  <h1>Panel de Control</h1>

  <!-- KPI Cards -->
  <div class="kpi-grid">
    <mat-card *ngFor="let kpi of kpis" class="kpi-card">
      <div class="kpi-content">
        <mat-icon [style.color]="kpi.color">{{ kpi.icon }}</mat-icon>
        <div class="kpi-number">{{ kpi.value }}</div>
        <div class="kpi-label">{{ kpi.label }}</div>
      </div>
    </mat-card>
  </div>

  <!-- Charts and Map Section -->
  <div class="dashboard-content">
    <div class="chart-section">
      <mat-card class="chart-card">
        <mat-card-header>
          <mat-card-title>Estado de Entregas</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="chart-placeholder">
            <div class="pie-chart">
              <div class="pie-segment completed" [style.--percentage]="completedPercentage + '%'">
                <span class="pie-label">{{ completedPercentage }}% Completadas</span>
              </div>
              <div class="pie-segment pending" [style.--percentage]="pendingPercentage + '%'">
                <span class="pie-label">{{ pendingPercentage }}% Pendientes</span>
              </div>
              <div class="pie-segment error" [style.--percentage]="errorPercentage + '%'">
                <span class="pie-label">{{ errorPercentage }}% Con Error</span>
              </div>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>

    <div class="map-section">
      <mat-card class="map-card">
        <mat-card-header>
          <mat-card-title>Ubicaciones Activas</mat-card-title>
          <mat-card-subtitle>Distribución geográfica actual</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <app-map
            [markers]="mapMarkers"
            [center]="[-33.4489, -70.6693]"
            [zoom]="11">
          </app-map>
        </mat-card-content>
      </mat-card>
    </div>
  </div>

</div>
